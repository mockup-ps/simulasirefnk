(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[48],{720:function(e,t,c){"use strict";c.r(t);var n=c(166),i=c(43),a=c(628),r=c(626),d=(c(672),c(1)),l=c(165),s=c(20),o={"01":{"02":{parent:"XX",directchild:["03"],indirectchild:["04","07","08"]},"03":{parent:"02",directchild:["04"],indirectchild:["07","08"]},"04":{parent:"03",directchild:["07"],indirectchild:["08"]},"07":{parent:"04",directchild:["08"],indirectchild:[]},"08":{parent:"07",directchild:[],indirectchild:[]}},"02":{"02":{parent:"XX",directchild:["03","04"],indirectchild:["07","08"]},"03":{parent:"02",directchild:["07"],indirectchild:[]},"07":{parent:"03",directchild:[],indirectchild:[]},"04":{parent:"02",directchild:["08"],indirectchild:[]},"08":{parent:"04",directchild:[],indirectchild:[]}},"03":{"02":{parent:"XX",directchild:["03"],indirectchild:["04","08"]},"03":{parent:"02",directchild:["04"],indirectchild:["08"]},"04":{parent:"03",directchild:["08"],indirectchild:[]},"08":{parent:"04",directchild:[],indirectchild:[]},"09":{parent:"XX",directchild:[],indirectchild:[]}},"04":{"02":{parent:"XX",directchild:["04"],indirectchild:["05","06","08"]},"04":{parent:"02",directchild:["05"],indirectchild:["06","08"]},"05":{parent:"04",directchild:["08","06"],indirectchild:[]},"06":{parent:"05",directchild:[],indirectchild:[]},"08":{parent:"05",directchild:[],indirectchild:[]}},"05":{"02":{parent:"XX",directchild:["03"],indirectchild:["03","07","08"]},"03":{parent:"02",directchild:["07"],indirectchild:["08"]},"07":{parent:"03",directchild:["08"],indirectchild:[]},"08":{parent:"07",directchild:[],indirectchild:[]}}},u=[{kode:"01",value:"Komoditas"},{kode:"02",value:"Subkomoditas"},{kode:"03",value:"Jenis Penggunaan"},{kode:"04",value:"Jenis Barang"},{kode:"05",value:"Kategori Barang"},{kode:"06",value:"Varians"},{kode:"07",value:"Standard Mutu"},{kode:"08",value:"Kode HS"},{kode:"09",value:"Nama Latin"}],j=[{kode:"01",value:"Beras"},{kode:"02",value:"Garam"},{kode:"03",value:"Ikan"},{kode:"04",value:"Daging Lembu"},{kode:"05",value:"Gula"}],b=[{label:"Nomor",key:"no"},{label:"Komoditas",key:"komoditas"},{label:"Uraian Barang",key:"urbarang"},{label:"Jumlah Barang",key:"jmlbarang"},{label:"Satuan Barang",key:"satuan"}],h=function(){var e,t=Object(l.c)((function(e){return e.barang})),c=Object(d.useState)([]),i=Object(a.a)(c,2),h=i[0],O=i[1],m=Object(d.useState)([]),p=Object(a.a)(m,2),f=p[0],x=p[1];return Object(d.useEffect)((function(){var e=t.map((function(e){return e.komoditas})).filter((function(e,t,c){return c.indexOf(e)===t}));x(e),O(t)}),[t]),e=0!=f.length?f.map((function(e){var t=Object.keys(o[e]);return console.log(b.concat(u.filter((function(e){return t.includes(e.kode)})).map((function(e){var t;return t={},Object(n.a)(t,"label",e.value),Object(n.a)(t,"key",e.kode),t})))),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"mb-1",children:[Object(s.jsx)("b",{children:"Komoditas : "}),j.filter((function(t){return t.kode==e}))[0].value]}),Object(s.jsx)(r.y,{addTableClasses:"josss",fields:b.concat(u.filter((function(e){return t.includes(e.kode)})).map((function(e){var t;return t={},Object(n.a)(t,"label",e.value),Object(n.a)(t,"key",e.kode),t}))).concat([{label:"Action",key:"action"}]),items:h.filter((function(t){return t.komoditas==e})),scopedSlots:{komoditas:function(e,t){return Object(s.jsx)("td",{children:j.filter((function(t){return t.kode==e.komoditas}))[0].value})},action:function(e,t){return Object(s.jsx)("td",{children:Object(s.jsx)(r.f,{className:"btn btn-sm btn-warning",children:"Edit"})})},no:function(e,t){return Object(s.jsx)("td",{children:t+1})},"02":function(e,t){var c="";return e["02"]&&(c=e["02"].label),Object(s.jsx)("td",{children:c})},"03":function(e,t){var c="";return e["03"]&&(c=e["03"].label),Object(s.jsx)("td",{children:c})},"04":function(e,t){var c="";return e["04"]&&(c=e["04"].label),Object(s.jsx)("td",{children:c})},"05":function(e,t){var c="";return e["05"]&&(c=e["05"].label),Object(s.jsx)("td",{children:c})},"06":function(e,t){var c="";return e["06"]&&(c=e["06"].label),Object(s.jsx)("td",{children:c})},"07":function(e,t){var c="";return e["07"]&&(c=e["07"].label),Object(s.jsx)("td",{children:c})},"08":function(e,t){var c="";return e["08"]&&(c=e["08"].label),Object(s.jsx)("td",{children:c})},"09":function(e,t){var c="";return e["09"]&&(c=e["09"].label),Object(s.jsx)("td",{children:c})}}})]})})):"Kosong",Object(s.jsx)("div",{className:"d-flex flex-column",children:e})},O=c(632),m=c.n(O),p=c(674),f=c(675),x=c(719),v=c(718),k=Object(v.a)("https://ctvjpxocqeajngziaxji.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyMzE4Mjc3OSwiZXhwIjoxOTM4NzU4Nzc5fQ.pCQD8_U0cgWJtgLbOh90kUGpxpOmpwzDmsfwKzj7PwE"),g={"01":{"02":{parent:"XX",directchild:["03"],indirectchild:["04","07","08"]},"03":{parent:"02",directchild:["04"],indirectchild:["07","08"]},"04":{parent:"03",directchild:["07"],indirectchild:["08"]},"07":{parent:"04",directchild:["08"],indirectchild:[]},"08":{parent:"07",directchild:[],indirectchild:[]}},"02":{"02":{parent:"XX",directchild:["03","04"],indirectchild:["07","08"]},"03":{parent:"02",directchild:["07"],indirectchild:[]},"07":{parent:"03",directchild:[],indirectchild:[]},"04":{parent:"02",directchild:["08"],indirectchild:[]},"08":{parent:"04",directchild:[],indirectchild:[]}},"03":{"02":{parent:"XX",directchild:["03"],indirectchild:["04","08"]},"03":{parent:"02",directchild:["04"],indirectchild:["08"]},"04":{parent:"03",directchild:["08"],indirectchild:[]},"08":{parent:"04",directchild:[],indirectchild:[]},"09":{parent:"XX",directchild:[],indirectchild:[]}},"04":{"02":{parent:"XX",directchild:["04"],indirectchild:["05","06","08"]},"04":{parent:"02",directchild:["05"],indirectchild:["06","08"]},"05":{parent:"04",directchild:["08","06"],indirectchild:[]},"06":{parent:"05",directchild:[],indirectchild:[]},"08":{parent:"05",directchild:[],indirectchild:[]}},"05":{"02":{parent:"XX",directchild:["03"],indirectchild:["03","07","08"]},"03":{parent:"02",directchild:["07"],indirectchild:["08"]},"07":{parent:"03",directchild:["08"],indirectchild:[]},"08":{parent:"07",directchild:[],indirectchild:[]}}},y=[{kode:"01",value:"Komoditas"},{kode:"02",value:"Subkomoditas"},{kode:"03",value:"Jenis Penggunaan"},{kode:"04",value:"Jenis Barang"},{kode:"05",value:"Kategori Barang"},{kode:"06",value:"Varians"},{kode:"07",value:"Standard Mutu"},{kode:"08",value:"Kode HS"},{kode:"09",value:"Nama Latin"}],X=function(e){var t=Object(l.b)(),c=Object(d.useState)([]),o=Object(a.a)(c,2),u=o[0],j=o[1],b=Object(d.useState)({}),h=Object(a.a)(b,2),O=h[0],v=h[1],X=Object(d.useState)({}),S=Object(a.a)(X,2),w=S[0],N=S[1];Object(d.useEffect)((function(){if(!e.modal){var t=Object(i.a)({},w),c=Object(i.a)({},O);u.map((function(e){t[e[0]]="",c[e[0]]=[]})),N(t),v(c)}}),[e.modal]),Object(d.useEffect)((function(){for(var t=Object(i.a)({},w),c=g[e.komoditas],a=Object.entries(c),r=0,d=a;r<d.length;r++){t[d[r][0]]=""}N(t),j(a),B(e.komoditas,a[0][0]).then((function(t){var c,i=t.filter((function(t){return t.kd_parent==e.komoditas})),r=a[0][0];console.log(i),v((c={},Object(n.a)(c,r,i),Object(n.a)(c,"09",[{label:"Nama Latin",value:"Nama Latin"}]),c))}))}),[e.komoditas]);var B=function(){var e=Object(p.a)(m.a.mark((function e(t,c){var n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("tr_ref_nk").select("value, label, kd_parent").eq("kd_parent",t).eq("kd_grup",c);case 2:return n=e.sent,i=n.data,n.error,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"mb-2",children:Object(s.jsx)("b",{style:{borderBottom:"2px solid grey"},children:"Data Spesifik"})}),Object(s.jsx)(r.wb,{className:"d-flex flex-row",children:u.map((function(e){return console.log(e),Object(s.jsx)(r.u,{name:e[0],md:"3",children:Object(s.jsxs)(r.K,{name:e[0],children:[Object(s.jsx)(r.cb,{name:e[0],children:y.filter((function(t){return t.kode==e[0]}))[0].value}),Object(s.jsx)(x.a,{onChange:function(e,c){return function(e,c){var n,a=Object(i.a)({},O),r=Object(i.a)({},w),d=u.filter((function(e){return e[0]==c.name}))[0][1].directchild,l=u.filter((function(e){return e[0]==c.name}))[0][1].indirectchild,s=d.concat(l),o=Object(f.a)(s);try{for(o.s();!(n=o.n()).done;){var j=n.value;a[j]=[],r[j]=""}}catch(b){o.e(b)}finally{o.f()}r[c.name]=e,v(a),N(r),t({type:"set",khusus:r}),new Promise(function(){var t=Object(p.a)(m.a.mark((function t(c,n){var a,r,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object(i.a)({},O),r=m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(e.value,d[n]).then((function(t){var c=t.filter((function(t){return t.kd_parent==e.value}));a[d[n]]=c}));case 2:d.length-1==n&&c(a);case 3:case"end":return t.stop()}}),t)})),t.t0=m.a.keys(d);case 3:if((t.t1=t.t0()).done){t.next=8;break}return l=t.t1.value,t.delegateYield(r(l),"t2",6);case 6:t.next=3;break;case 8:case"end":return t.stop()}}),t)})));return function(e,c){return t.apply(this,arguments)}}()).then((function(e){v(e)}))}(e,c)},options:O[e[0]],value:w[e[0]],name:e[0]})]})})}))})]})},S=function(e){return e.komoditas&&"00"!=e.komoditas?Object(s.jsx)(X,{modal:e.modal,komoditas:e.komoditas}):Object(s.jsx)("div",{className:"mb-2",children:Object(s.jsx)("b",{children:"Harap Pilih Komoditas"})})};t.default=function(){var e=Object(l.c)((function(e){return e.umum})),t=Object(l.c)((function(e){return e.khusus})),c=Object(l.c)((function(e){return e.barang})),o=Object(l.b)(),u=Object(d.useState)(),j=Object(a.a)(u,2),b=j[0],O=j[1],m=Object(d.useState)(!1),p=Object(a.a)(m,2),f=p[0],x=p[1],v=Object(d.useState)({}),k=Object(a.a)(v,2),g=k[0],y=k[1],X=Object(d.useState)([]),w=Object(a.a)(X,2),N=(w[0],w[1],function(c){if("komoditas"==c.target.name)O(c.target.value),o({type:"set",khusus:{}}),o({type:"set",umum:{komoditas:c.target.value,urbarang:"",jmlbarang:"",satuan:""}}),y(Object(i.a)(Object(i.a)({},g),{},Object(n.a)({},c.target.name,c.target.value))),console.log(e,t);else{y(Object(i.a)(Object(i.a)({},g),{},Object(n.a)({},c.target.name,c.target.value)));var a=Object(i.a)(Object(i.a)({},e),{},Object(n.a)({},c.target.name,c.target.value));o({type:"set",umum:a}),console.log(e,t)}});return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(r.gb,{show:f,size:"xl",onClose:function(){x(!1),y(Object(i.a)(Object(i.a)({},g),{},Object(n.a)({},"komoditas","00"))),O("00"),o({type:"set",umum:{urbarang:"",jmlbarang:"",satuan:""}})},children:[Object(s.jsx)(r.jb,{closeButton:!0,children:Object(s.jsx)("h5",{children:"Tambah Data Bahan Baku"})}),Object(s.jsxs)(r.hb,{children:[Object(s.jsx)(r.wb,{children:Object(s.jsx)(r.u,{md:"2",children:Object(s.jsxs)(r.K,{children:[Object(s.jsx)(r.cb,{children:"Komoditas"}),Object(s.jsxs)(r.xb,{value:g.komoditas,name:"komoditas",onChange:function(e){return N(e)},children:[Object(s.jsx)("option",{value:"00"}),Object(s.jsx)("option",{value:"01",children:"Beras"}),Object(s.jsx)("option",{value:"02",children:"Garam"}),Object(s.jsx)("option",{value:"03",children:"Hasil Perikanan"}),Object(s.jsx)("option",{value:"04",children:"Daging Lembu"}),Object(s.jsx)("option",{value:"05",children:"Gula"})]})]})})}),Object(s.jsx)(r.j,{style:{borderRadius:"12px",boxShadow:"0 2px 4px rgb(0 0 0 / 10%), 0 8px 16px rgb(0 0 0 / 10%)"},children:Object(s.jsx)(r.k,{children:Object(s.jsx)(S,{modal:f,komoditas:b})})}),Object(s.jsx)(r.wb,{children:Object(s.jsx)(r.u,{md:"12",children:Object(s.jsxs)(r.K,{children:[Object(s.jsx)(r.cb,{children:"Uraian Barang"}),Object(s.jsx)(r.Lb,{value:e.urbarang,name:"urbarang",onChange:function(e){return N(e)}})]})})}),Object(s.jsxs)(r.wb,{children:[Object(s.jsx)(r.u,{md:"6",children:Object(s.jsxs)(r.K,{children:[Object(s.jsx)(r.cb,{children:"Jumlah Barang"}),Object(s.jsx)(r.S,{value:e.jmlbarang,name:"jmlbarang",onChange:function(e){return N(e)},type:"number"})]})}),Object(s.jsx)(r.u,{md:"6",children:Object(s.jsxs)(r.K,{children:[Object(s.jsx)(r.cb,{children:"Satuan Barang"}),Object(s.jsxs)(r.xb,{value:e.satuan,name:"satuan",onChange:function(e){return N(e)},children:[Object(s.jsx)("option",{value:""}),Object(s.jsx)("option",{value:"Ton",children:"Ton"}),Object(s.jsx)("option",{value:"Kgm",children:"Kgm"})]})]})})]})]}),Object(s.jsx)(r.ib,{children:Object(s.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(s.jsx)("div",{onClick:function(){return function(){var a=Object(i.a)({},e),r=Object(i.a)({},t),d=Object(i.a)(Object(i.a)({},a),r),l=c.slice();l.push(d),x(!1),y(Object(i.a)(Object(i.a)({},g),{},Object(n.a)({},"komoditas","00"))),O("00"),o({type:"set",umum:{urbarang:"",jmlbarang:"",satuan:""}}),o({type:"set",barang:l})}()},className:"mr-3",children:Object(s.jsx)(r.f,{className:"btn btn-success",children:"Simpan"})}),Object(s.jsx)("div",{children:Object(s.jsx)(r.f,{className:"btn btn-danger",children:"Batal"})})]})})]}),Object(s.jsxs)(r.j,{children:[Object(s.jsx)(r.n,{children:Object(s.jsx)("h5",{children:"Simulasi Referensi Bahan Baku"})}),Object(s.jsxs)(r.k,{children:[Object(s.jsx)("div",{className:"d-flex flex-row justify-content-end mr-3 mb-2",children:Object(s.jsx)(r.f,{onClick:function(){return x(!0)},className:"btn btn-sm btn-success",children:"Tambah"})}),Object(s.jsx)(r.j,{style:{borderRadius:"12px"},children:Object(s.jsx)(r.k,{className:"",children:Object(s.jsx)(h,{})})})]})]})]})}}}]);
//# sourceMappingURL=48.8665d1d8.chunk.js.map