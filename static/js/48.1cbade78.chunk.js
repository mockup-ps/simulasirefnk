(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[48],{720:function(e,t,c){"use strict";c.r(t);var n=c(166),a=c(43),i=c(628),r=c(626),d=(c(672),c(1)),l=c(165),s=c(20),u={"01":{"02":{parent:"XX",directchild:["03"],indirectchild:["04","07","08"]},"03":{parent:"02",directchild:["04"],indirectchild:["07","08"]},"04":{parent:"03",directchild:["07"],indirectchild:["08"]},"07":{parent:"04",directchild:["08"],indirectchild:[]},"08":{parent:"07",directchild:[],indirectchild:[]}},"02":{"02":{parent:"XX",directchild:["03","04"],indirectchild:["07","08"]},"03":{parent:"02",directchild:["07"],indirectchild:[]},"04":{parent:"02",directchild:["08"],indirectchild:[]},"07":{parent:"03",directchild:[],indirectchild:[]},"08":{parent:"04",directchild:[],indirectchild:[]}},"03":{},"04":{"02":{parent:"XX",directchild:["04"],indirectchild:["05","06","08"]},"04":{parent:"02",directchild:["05"],indirectchild:["06","08"]},"05":{parent:"04",directchild:["08","06"],indirectchild:[]},"06":{parent:"05",directchild:[],indirectchild:[]},"08":{parent:"05",directchild:[],indirectchild:[]}},"05":{"02":{parent:"XX",directchild:["03"],indirectchild:["03","07","08"]},"03":{parent:"02",directchild:["07"],indirectchild:["08"]},"07":{parent:"03",directchild:["08"],indirectchild:[]},"08":{parent:"07",directchild:[],indirectchild:[]}}},o=[{kode:"01",value:"Komoditas"},{kode:"02",value:"Subkomoditas"},{kode:"03",value:"Jenis Penggunaan"},{kode:"04",value:"Jenis Barang"},{kode:"05",value:"Kategori Barang"},{kode:"06",value:"Varians"},{kode:"07",value:"Standard Mutu"},{kode:"08",value:"Kode HS"},{kode:"09",value:"Nama Latin"}],j=[{kode:"01",value:"Beras"},{kode:"02",value:"Garam"},{kode:"03",value:"Ikan"},{kode:"04",value:"Daging Lembu"},{kode:"05",value:"Gula"}],b=[{label:"Nomor",key:"no"},{label:"Komoditas",key:"komoditas"},{label:"Uraian Barang",key:"urbarang"},{label:"Jumlah Barang",key:"jmlbarang"},{label:"Satuan Barang",key:"satuan"}],h=function(){var e,t=Object(l.c)((function(e){return e.barang})),c=Object(d.useState)([]),a=Object(i.a)(c,2),h=a[0],O=a[1],m=Object(d.useState)([]),f=Object(i.a)(m,2),x=f[0],p=f[1];return Object(d.useEffect)((function(){var e=t.map((function(e){return e.komoditas})).filter((function(e,t,c){return c.indexOf(e)===t}));p(e),O(t)}),[t]),e=0!=x.length?x.map((function(e){var t=Object.keys(u[e]);return console.log(b.concat(o.filter((function(e){return t.includes(e.kode)})).map((function(e){var t;return t={},Object(n.a)(t,"label",e.value),Object(n.a)(t,"key",e.kode),t})))),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"mb-1",children:[Object(s.jsx)("b",{children:"Komoditas : "}),j.filter((function(t){return t.kode==e}))[0].value]}),Object(s.jsx)(r.y,{addTableClasses:"josss",fields:b.concat(o.filter((function(e){return t.includes(e.kode)})).map((function(e){var t;return t={},Object(n.a)(t,"label",e.value),Object(n.a)(t,"key",e.kode),t}))).concat([{label:"Action",key:"action"}]),items:h.filter((function(t){return t.komoditas==e})),scopedSlots:{komoditas:function(e,t){return Object(s.jsx)("td",{children:j.filter((function(t){return t.kode==e.komoditas}))[0].value})},action:function(e,t){return Object(s.jsx)("td",{children:Object(s.jsx)(r.f,{className:"btn btn-sm btn-warning",children:"Edit"})})},no:function(e,t){return Object(s.jsx)("td",{children:t+1})},"02":function(e,t){var c="";return e["02"]&&(c=e["02"].label),Object(s.jsx)("td",{children:c})},"03":function(e,t){var c="";return e["03"]&&(c=e["03"].label),Object(s.jsx)("td",{children:c})},"04":function(e,t){var c="";return e["04"]&&(c=e["04"].label),Object(s.jsx)("td",{children:c})},"05":function(e,t){var c="";return e["05"]&&(c=e["05"].label),Object(s.jsx)("td",{children:c})},"06":function(e,t){var c="";return e["06"]&&(c=e["06"].label),Object(s.jsx)("td",{children:c})},"07":function(e,t){var c="";return e["07"]&&(c=e["07"].label),Object(s.jsx)("td",{children:c})},"08":function(e,t){var c="";return e["08"]&&(c=e["08"].label),Object(s.jsx)("td",{children:c})}}})]})})):"Kosong",Object(s.jsx)("div",{className:"d-flex flex-column",children:e})},O=c(632),m=c.n(O),f=c(674),x=c(675),p=c(719),v=c(718),k=Object(v.a)("https://ctvjpxocqeajngziaxji.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyMzE4Mjc3OSwiZXhwIjoxOTM4NzU4Nzc5fQ.pCQD8_U0cgWJtgLbOh90kUGpxpOmpwzDmsfwKzj7PwE"),g={"01":{"02":{parent:"XX",directchild:["03"],indirectchild:["04","07","08"]},"03":{parent:"02",directchild:["04"],indirectchild:["07","08"]},"04":{parent:"03",directchild:["07"],indirectchild:["08"]},"07":{parent:"04",directchild:["08"],indirectchild:[]},"08":{parent:"07",directchild:[],indirectchild:[]}},"02":{"02":{parent:"XX",directchild:["03","04"],indirectchild:["07","08"]},"03":{parent:"02",directchild:["07"],indirectchild:[]},"04":{parent:"02",directchild:["08"],indirectchild:[]},"07":{parent:"03",directchild:[],indirectchild:[]},"08":{parent:"04",directchild:[],indirectchild:[]}},"03":{},"04":{"02":{parent:"XX",directchild:["04"],indirectchild:["05","06","08"]},"04":{parent:"02",directchild:["05"],indirectchild:["06","08"]},"05":{parent:"04",directchild:["08","06"],indirectchild:[]},"06":{parent:"05",directchild:[],indirectchild:[]},"08":{parent:"05",directchild:[],indirectchild:[]}},"05":{"02":{parent:"XX",directchild:["03"],indirectchild:["03","07","08"]},"03":{parent:"02",directchild:["07"],indirectchild:["08"]},"07":{parent:"03",directchild:["08"],indirectchild:[]},"08":{parent:"07",directchild:[],indirectchild:[]}}},y=[{kode:"01",value:"Komoditas"},{kode:"02",value:"Subkomoditas"},{kode:"03",value:"Jenis Penggunaan"},{kode:"04",value:"Jenis Barang"},{kode:"05",value:"Kategori Barang"},{kode:"06",value:"Varians"},{kode:"07",value:"Standard Mutu"},{kode:"08",value:"Kode HS"},{kode:"09",value:"Nama Latin"}],S=function(e){var t=Object(l.b)(),c=Object(d.useState)([]),u=Object(i.a)(c,2),o=u[0],j=u[1],b=Object(d.useState)({}),h=Object(i.a)(b,2),O=h[0],v=h[1],S=Object(d.useState)({}),w=Object(i.a)(S,2),B=w[0],K=w[1];Object(d.useEffect)((function(){if(!e.modal){var t=Object(a.a)({},B),c=Object(a.a)({},O);o.map((function(e){t[e[0]]="",c[e[0]]=[]})),K(t),v(c)}}),[e.modal]),Object(d.useEffect)((function(){for(var t=Object(a.a)({},B),c=g[e.komoditas],i=Object.entries(c),r=0,d=i;r<d.length;r++){t[d[r][0]]=""}K(t),j(i),N(i[0][0]).then((function(t){var c=t.filter((function(t){return t.kd_parent==e.komoditas})),a=i[0][0];v(Object(n.a)({},a,c))}))}),[e.komoditas]);var N=function(){var e=Object(f.a)(m.a.mark((function e(t){var c,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.from("tr_ref_nk").select("value, label, kd_parent").eq("kd_grup",t);case 2:return c=e.sent,n=c.data,c.error,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"mb-2",children:Object(s.jsx)("b",{style:{borderBottom:"2px solid grey"},children:"Data Spesifik"})}),Object(s.jsx)(r.wb,{className:"d-flex flex-row",children:o.map((function(e){return Object(s.jsx)(r.u,{name:e[0],md:"3",children:Object(s.jsxs)(r.K,{name:e[0],children:[Object(s.jsx)(r.cb,{name:e[0],children:y.filter((function(t){return t.kode==e[0]}))[0].value}),Object(s.jsx)(p.a,{onChange:function(e,c){return function(e,c){var n,i=Object(a.a)({},O),r=Object(a.a)({},B),d=o.filter((function(e){return e[0]==c.name}))[0][1].directchild,l=o.filter((function(e){return e[0]==c.name}))[0][1].indirectchild,s=d.concat(l),u=Object(x.a)(s);try{for(u.s();!(n=u.n()).done;){var j=n.value;i[j]=[],r[j]=""}}catch(b){u.e(b)}finally{u.f()}r[c.name]=e,v(i),K(r),t({type:"set",khusus:r}),new Promise(function(){var t=Object(f.a)(m.a.mark((function t(c,n){var i,r,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=Object(a.a)({},O),r=m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(d[n]).then((function(t){var c=t.filter((function(t){return t.kd_parent==e.value}));i[d[n]]=c}));case 2:d.length-1==n&&c(i);case 3:case"end":return t.stop()}}),t)})),t.t0=m.a.keys(d);case 3:if((t.t1=t.t0()).done){t.next=8;break}return l=t.t1.value,t.delegateYield(r(l),"t2",6);case 6:t.next=3;break;case 8:case"end":return t.stop()}}),t)})));return function(e,c){return t.apply(this,arguments)}}()).then((function(e){v(e)}))}(e,c)},options:O[e[0]],value:B[e[0]],name:e[0]})]})})}))})]})},w=function(e){return e.komoditas&&"00"!=e.komoditas?Object(s.jsx)(S,{modal:e.modal,komoditas:e.komoditas}):Object(s.jsx)("div",{className:"mb-2",children:Object(s.jsx)("b",{children:"Harap Pilih Komoditas"})})};t.default=function(){var e=Object(l.c)((function(e){return e.umum})),t=Object(l.c)((function(e){return e.khusus})),c=Object(l.c)((function(e){return e.barang})),u=Object(l.b)(),o=Object(d.useState)(),j=Object(i.a)(o,2),b=j[0],O=j[1],m=Object(d.useState)(!1),f=Object(i.a)(m,2),x=f[0],p=f[1],v=Object(d.useState)({}),k=Object(i.a)(v,2),g=k[0],y=k[1],S=Object(d.useState)([]),B=Object(i.a)(S,2),K=(B[0],B[1],function(c){if("komoditas"==c.target.name)O(c.target.value),u({type:"set",khusus:{}}),u({type:"set",umum:{komoditas:c.target.value,urbarang:"",jmlbarang:"",satuan:""}}),y(Object(a.a)(Object(a.a)({},g),{},Object(n.a)({},c.target.name,c.target.value))),console.log(e,t);else{y(Object(a.a)(Object(a.a)({},g),{},Object(n.a)({},c.target.name,c.target.value)));var i=Object(a.a)(Object(a.a)({},e),{},Object(n.a)({},c.target.name,c.target.value));u({type:"set",umum:i}),console.log(e,t)}});return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(r.gb,{show:x,size:"xl",onClose:function(){p(!1),y(Object(a.a)(Object(a.a)({},g),{},Object(n.a)({},"komoditas","00"))),O("00"),u({type:"set",umum:{urbarang:"",jmlbarang:"",satuan:""}})},children:[Object(s.jsx)(r.jb,{closeButton:!0,children:Object(s.jsx)("h5",{children:"Tambah Data Bahan Baku"})}),Object(s.jsxs)(r.hb,{children:[Object(s.jsx)(r.wb,{children:Object(s.jsx)(r.u,{md:"2",children:Object(s.jsxs)(r.K,{children:[Object(s.jsx)(r.cb,{children:"Komoditas"}),Object(s.jsxs)(r.xb,{value:g.komoditas,name:"komoditas",onChange:function(e){return K(e)},children:[Object(s.jsx)("option",{value:"00"}),Object(s.jsx)("option",{value:"01",children:"Beras"}),Object(s.jsx)("option",{value:"02",children:"Garam"}),Object(s.jsx)("option",{value:"04",children:"Daging Lembu"}),Object(s.jsx)("option",{value:"05",children:"Gula"})]})]})})}),Object(s.jsx)(r.j,{style:{borderRadius:"12px",boxShadow:"0 2px 4px rgb(0 0 0 / 10%), 0 8px 16px rgb(0 0 0 / 10%)"},children:Object(s.jsx)(r.k,{children:Object(s.jsx)(w,{modal:x,komoditas:b})})}),Object(s.jsx)(r.wb,{children:Object(s.jsx)(r.u,{md:"12",children:Object(s.jsxs)(r.K,{children:[Object(s.jsx)(r.cb,{children:"Uraian Barang"}),Object(s.jsx)(r.Lb,{value:e.urbarang,name:"urbarang",onChange:function(e){return K(e)}})]})})}),Object(s.jsxs)(r.wb,{children:[Object(s.jsx)(r.u,{md:"6",children:Object(s.jsxs)(r.K,{children:[Object(s.jsx)(r.cb,{children:"Jumlah Barang"}),Object(s.jsx)(r.S,{value:e.jmlbarang,name:"jmlbarang",onChange:function(e){return K(e)},type:"number"})]})}),Object(s.jsx)(r.u,{md:"6",children:Object(s.jsxs)(r.K,{children:[Object(s.jsx)(r.cb,{children:"Satuan Barang"}),Object(s.jsxs)(r.xb,{value:e.satuan,name:"satuan",onChange:function(e){return K(e)},children:[Object(s.jsx)("option",{value:""}),Object(s.jsx)("option",{value:"Ton",children:"Ton"}),Object(s.jsx)("option",{value:"Kgm",children:"Kgm"})]})]})})]})]}),Object(s.jsx)(r.ib,{children:Object(s.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(s.jsx)("div",{onClick:function(){return function(){var i=Object(a.a)({},e),r=Object(a.a)({},t),d=Object(a.a)(Object(a.a)({},i),r),l=c.slice();l.push(d),p(!1),y(Object(a.a)(Object(a.a)({},g),{},Object(n.a)({},"komoditas","00"))),O("00"),u({type:"set",umum:{urbarang:"",jmlbarang:"",satuan:""}}),u({type:"set",barang:l})}()},className:"mr-3",children:Object(s.jsx)(r.f,{className:"btn btn-success",children:"Simpan"})}),Object(s.jsx)("div",{children:Object(s.jsx)(r.f,{className:"btn btn-danger",children:"Batal"})})]})})]}),Object(s.jsxs)(r.j,{children:[Object(s.jsx)(r.n,{children:Object(s.jsx)("h5",{children:"Simulasi Referensi Bahan Baku"})}),Object(s.jsxs)(r.k,{children:[Object(s.jsx)("div",{className:"d-flex flex-row justify-content-end mr-3 mb-2",children:Object(s.jsx)(r.f,{onClick:function(){return p(!0)},className:"btn btn-sm btn-success",children:"Tambah"})}),Object(s.jsx)(r.j,{style:{borderRadius:"12px"},children:Object(s.jsx)(r.k,{className:"",children:Object(s.jsx)(h,{})})})]})]})]})}}}]);
//# sourceMappingURL=48.1cbade78.chunk.js.map